<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Telegram Mini App</title>
<style>
body {
    margin: 0;
    font-family: Arial;
    background: #ffffff;
}
.screen {
    display: none;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}
.active { display: block; }

.button {
    width: 75vw;
    margin: 20px auto 0;
    padding: 15px;
    font-size: 18px;
    text-align: center;
    background: #0088ff;
    color: #fff;
    border: none;
    border-radius: 12px;
    display: block;
}

.option {
    background: #f2f2f2;
    padding: 12px;
    border-radius: 12px;
    margin-top: 15px;
    display: flex;
    gap: 12px;
    align-items: center;
    cursor: pointer;
}
.option img {
    width: 50px;
    height: 50px;
    border-radius: 8px;
}
.desc {
    font-size: 13px;
    margin-top: 4px;
    color: #444;
}

#loader {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(255,255,255,0.9);
    display: none;
    justify-content: center;
    align-items: center;
    font-size: 22px;
}
</style>
</head>
<body>

<div id="loader">Загрузка...</div>

<!-- SCREEN 1 -->
<div id="welcome" class="screen active" style="text-align:center;">
    <img src="https://picsum.photos/600/900" style="width:75vw; max-height:75vh; object-fit:contain; margin-top:20px;">
    <button class="button" onclick="openScreen('choose')">Действие</button>
</div>

<!-- SCREEN 2 -->
<div id="choose" class="screen">
    <h2>Выберите параметр</h2>

    <div class="option" onclick="selectOption('Позиция A', 10)">
        <img src="https://picsum.photos/50?1">
        <div>
            Позиция A — 10 USDT
            <div class="desc">Описание позиции A...</div>
        </div>
    </div>

    <div class="option" onclick="selectOption('Позиция B', 25)">
        <img src="https://picsum.photos/50?2">
        <div>
            Позиция B — 25 USDT
            <div class="desc">Описание позиции B...</div>
        </div>
    </div>

    <div class="option" onclick="selectOption('Позиция C', 50)">
        <img src="https://picsum.photos/50?3">
        <div>
            Позиция C — 50 USDT
            <div class="desc">Описание позиции C...</div>
        </div>
    </div>
</div>

<!-- SCREEN 3 -->
<div id="payment" class="screen">
    <h2 id="pay_title">Оплата</h2>

    <p>Цена: <b id="price_usdt"></b> USDT</p>

    <label>Криптовалюта:</label><br>
    <select id="currency" onchange="updateConversion()">
        <option value="BTC">BTC</option>
        <option value="ETH">ETH</option>
        <option value="LTC">LTC</option>
        <option value="USDC">USDC</option>
    </select>

    <p>К оплате: <b id="converted_amount">...</b></p>

    <p>Адрес: <b id="wallet_address">...</b></p>
</div>

<script>
let selected = { name: null, price: 0 };

const wallets = {
    BTC: "bc1qexamplebtc",
    ETH: "0xexampleeth",
    LTC: "ltc1example",
    USDC: "0xexampleusdcaddress"
};

function openScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('loader').style.display = 'flex';
    setTimeout(() => {
        document.getElementById('loader').style.display = 'none';
        document.getElementById(id).classList.add('active');
    }, 900);
}

function selectOption(name, price) {
    selected = { name, price };
    document.getElementById('pay_title').innerText = name;
    document.getElementById('price_usdt').innerText = price;

    openScreen('payment');
    setTimeout(updateConversion, 1000);
}

async function updateCon
